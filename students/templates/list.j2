{% extends 'base.j2' %}
{% block content %}
{% load static %}
{% if request.user.is_authenticated %}
<ul>
<h2>{{ request.user.username }}</h2>
<ul>
{% for i in user %}
    <li id=user-{{ i.id }}><a href="{% url 'user_view' i.username %}" target="_blank">{{ i.username }}</a></li>
{% endfor %}
</ul>

<div id='data-container'>
</div>

{% endif %}
{% block script %}
    {% include 'ajax.j2' %}
    {{ fetchData(
        api_url='/api/users',
        data_block="""
            let html = '<ul>';
            results.forEach(function(item) {
                html += '<li> Name: ' + item.name + '</li>';
            });
            html += '</ul>';
            $('#data-container').html(html);
        """,
        target_block='data-container'
    ) }}
{% endblock %}
{% endblock %}
